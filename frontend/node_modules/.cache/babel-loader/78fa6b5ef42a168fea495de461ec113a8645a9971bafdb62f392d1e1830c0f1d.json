{"ast":null,"code":"import jwt_decode from \"jwt-decode\";\nimport { refresh } from \"../services/auth.service\";\nimport { authActions } from \"../store/auth-slice\";\nexport const getUserData = () => {\n  const userData = localStorage.getItem(\"user\");\n  if (userData) {\n    return JSON.parse(userData);\n  }\n  return null;\n};\nexport const refreshUserData = async (refreshToken, dispatch) => {\n  const newAccessToken = await refresh(refreshToken);\n  if (newAccessToken) {\n    setUserData(newAccessToken, refreshToken, dispatch);\n  } else {\n    setUserData(null, null, dispatch);\n  }\n};\nexport const setUserData = (accessToken, refreshToken, userName, email, roles, dispatch) => {\n  if (!accessToken && !refreshToken) {\n    localStorage.removeItem(\"user\");\n    dispatch(authActions.changeUser({\n      user: null\n    }));\n    return;\n  }\n  const user = {\n    userName,\n    email,\n    roles,\n    accessToken: accessToken,\n    refreshToken: refreshToken\n  };\n  localStorage.setItem(\"user\", JSON.stringify(user));\n  dispatch(authActions.changeUser({\n    user: user\n  }));\n};\nexport const updateUserAccessToken = accessToken => {\n  let user = JSON.parse(localStorage.getItem(\"user\"));\n  user.accessToken = accessToken;\n  localStorage.setItem(\"user\", JSON.stringify(user));\n};","map":{"version":3,"names":["jwt_decode","refresh","authActions","getUserData","userData","localStorage","getItem","JSON","parse","refreshUserData","refreshToken","dispatch","newAccessToken","setUserData","accessToken","userName","email","roles","removeItem","changeUser","user","setItem","stringify","updateUserAccessToken"],"sources":["C:/Stuff/KTU/8 semestras/bakalauras/project/frontendreact/my-app/src/storage/auth.storage.js"],"sourcesContent":["import jwt_decode from \"jwt-decode\";\r\nimport { refresh } from \"../services/auth.service\";\r\nimport { authActions } from \"../store/auth-slice\";\r\n\r\nexport const getUserData = () => {\r\n  const userData = localStorage.getItem(\"user\");\r\n  if (userData) {\r\n    return JSON.parse(userData);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const refreshUserData = async (refreshToken, dispatch) => {\r\n  const newAccessToken = await refresh(refreshToken);\r\n  if (newAccessToken) {\r\n    setUserData(newAccessToken, refreshToken, dispatch);\r\n  } else {\r\n    setUserData(null, null, dispatch);\r\n  }\r\n};\r\n\r\nexport const setUserData = (accessToken, refreshToken, userName, email, roles, dispatch) => {\r\n  if (!accessToken && !refreshToken) {\r\n    localStorage.removeItem(\"user\");\r\n    dispatch(\r\n      authActions.changeUser({\r\n        user: null,\r\n      })\r\n    );\r\n    return;\r\n  }\r\n  const user = {\r\n    userName,\r\n    email,\r\n    roles,\r\n    accessToken: accessToken,\r\n    refreshToken: refreshToken,\r\n  };\r\n  localStorage.setItem(\"user\", JSON.stringify(user));\r\n  dispatch(\r\n    authActions.changeUser({\r\n      user: user,\r\n    })\r\n  );\r\n};\r\n\r\nexport const updateUserAccessToken = (accessToken) => {\r\n  let user = JSON.parse(localStorage.getItem(\"user\"));\r\n  user.accessToken = accessToken;\r\n  localStorage.setItem(\"user\", JSON.stringify(user));\r\n}\r\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,YAAY;AACnC,SAASC,OAAO,QAAQ,0BAA0B;AAClD,SAASC,WAAW,QAAQ,qBAAqB;AAEjD,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAC/B,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAC7C,IAAIF,QAAQ,EAAE;IACZ,OAAOG,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC;EAC7B;EACA,OAAO,IAAI;AACb,CAAC;AAED,OAAO,MAAMK,eAAe,GAAG,MAAAA,CAAOC,YAAY,EAAEC,QAAQ,KAAK;EAC/D,MAAMC,cAAc,GAAG,MAAMX,OAAO,CAACS,YAAY,CAAC;EAClD,IAAIE,cAAc,EAAE;IAClBC,WAAW,CAACD,cAAc,EAAEF,YAAY,EAAEC,QAAQ,CAAC;EACrD,CAAC,MAAM;IACLE,WAAW,CAAC,IAAI,EAAE,IAAI,EAAEF,QAAQ,CAAC;EACnC;AACF,CAAC;AAED,OAAO,MAAME,WAAW,GAAGA,CAACC,WAAW,EAAEJ,YAAY,EAAEK,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEN,QAAQ,KAAK;EAC1F,IAAI,CAACG,WAAW,IAAI,CAACJ,YAAY,EAAE;IACjCL,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC;IAC/BP,QAAQ,CACNT,WAAW,CAACiB,UAAU,CAAC;MACrBC,IAAI,EAAE;IACR,CAAC,CAAC,CACH;IACD;EACF;EACA,MAAMA,IAAI,GAAG;IACXL,QAAQ;IACRC,KAAK;IACLC,KAAK;IACLH,WAAW,EAAEA,WAAW;IACxBJ,YAAY,EAAEA;EAChB,CAAC;EACDL,YAAY,CAACgB,OAAO,CAAC,MAAM,EAAEd,IAAI,CAACe,SAAS,CAACF,IAAI,CAAC,CAAC;EAClDT,QAAQ,CACNT,WAAW,CAACiB,UAAU,CAAC;IACrBC,IAAI,EAAEA;EACR,CAAC,CAAC,CACH;AACH,CAAC;AAED,OAAO,MAAMG,qBAAqB,GAAIT,WAAW,IAAK;EACpD,IAAIM,IAAI,GAAGb,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACnDc,IAAI,CAACN,WAAW,GAAGA,WAAW;EAC9BT,YAAY,CAACgB,OAAO,CAAC,MAAM,EAAEd,IAAI,CAACe,SAAS,CAACF,IAAI,CAAC,CAAC;AACpD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}